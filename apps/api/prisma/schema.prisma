generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String    @id(map: "PK_cace4a159ff9f2512dd42373760") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  createdAt       DateTime  @default(now()) @db.Timestamp(6)
  updatedAt       DateTime  @default(now()) @updatedAt @db.Timestamp(6)
  email           String    @unique(map: "UQ_e12875dfb3b1d92d7d7c5377e22") @db.VarChar
  password        String?   @db.VarChar
  username        String    @unique(map: "UQ_78a916df40e02a9deb1c4b75edb") @db.VarChar
  isEmailVerified Boolean?  @default(false)
  emailVerifiedAt DateTime? @db.Timestamp(6)
  profile         Profile?
  sessions        Session[]

  @@map("user")
}

model Profile {
  id             String              @id(map: "PK_3dd8bfc97e4a77c70971591bdcb") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  createdAt      DateTime            @default(now()) @db.Timestamp(6)
  updatedAt      DateTime            @default(now()) @updatedAt @db.Timestamp(6)
  userId         String              @unique(map: "REL_d752442f45f258a8bdefeebb2f") @map("user_id") @db.Uuid
  name           String              @db.VarChar
  gender         profile_gender_enum @default(UNKNOWN)
  phoneNumber    String?             @unique(map: "UQ_1e68703b93fb4c02a2cef6003ca") @db.VarChar
  profilePicture String?             @db.VarChar
  dateOfBirth    DateTime?           @db.Timestamp(6)
  address        String?
  user           User                @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_d752442f45f258a8bdefeebb2f2")

  @@map("profile")
}

model Session {
  id           String   @id(map: "PK_f55da76ac1c3ac420f444d2ff11") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  createdAt    DateTime @default(now()) @db.Timestamp(6)
  updatedAt    DateTime @default(now()) @updatedAt @db.Timestamp(6)
  ip           String?  @default("unknown") @db.VarChar
  location     String?  @default("unknown") @db.VarChar
  device_os    String?  @default("unknown") @db.VarChar
  device_name  String?  @default("unknown") @db.VarChar
  device_type  String?  @default("unknown") @db.VarChar
  browser      String?  @default("unknown") @db.VarChar
  userAgent    String?  @default("unknown") @db.VarChar
  refreshToken String   @map("refresh_token")
  userId       String   @map("user_id") @db.Uuid
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_30e98e8746699fb9af235410aff")

  @@map("session")
}

model Otp {
  id        String        @id(map: "PK_32556d9d7b22031d7d0e1fd6723") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  createdAt DateTime      @default(now()) @db.Timestamp(6)
  updatedAt DateTime      @default(now()) @updatedAt @db.Timestamp(6)
  otp       String        @db.VarChar
  expires   DateTime      @db.Timestamp(6)
  type      otp_type_enum

  @@map("otp")
}

enum otp_type_enum {
  EMAIL_VERIFICATION
  EMAIL_CONFIRMATION
  PASSWORD_RESET
}

enum profile_gender_enum {
  MALE
  FEMALE
  OTHER
  UNKNOWN
}
